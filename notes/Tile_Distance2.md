tags: [ABC, 算数]
# 【ABC359C】Tile Distance 2
<a href="https://atcoder.jp/contests/abc359/tasks/abc359_c" target="_blank">問題リンク</a>


<details>
<summary>解説</summary>

## 方針

* 原点を始点として、右上方向に正規化しても一般性を失わないので、以下そのように正規化したものとする。
* $t_y$分は必ずコストが発生する。
* $t_x$について
  * $t_x\leq t_y$の場合: コストが発生しない。
  * $t_x > t_y$の場合: $\lfloor (t_x-t_y)/2\rfloor$

* 右にある場合と左にある場合で距離が異なるので、1ズレてややこしい。
* 右側から左側へ移動してもコストは変わらない。
* そこで、予めタイルの右側にいる場合は、左側にいるとしておく。


## 注意

### 「平行移動」と「右マスから左マスへの移動」の操作順序について

* 操作は次の順序で行わなければならない。
1. 右マスから左マスへの移動
2. 始点が原点になるように、平行移動

逆にするとWAになる。

理由など: 

* 結局楽に求めるには、**基準を合わせること**が必要。
* 左に合わせれば、$t_y=t_x$からの右のズレ//2で求められるからこれで求めるために左で正規化したい。
* しかし、平行移動もしたい。
* ここでこれらの操作が可換でない理由は、平行移動すると、常に左側のマスに来るので、元々右マスにあったにしろ、左にズラすことが行われない（できない）から。
* 正しくは、元の情報で始点と終点の各々について、右にいたら、左にずらす。その後、平行移動する。
* すると、左に、かつ原点基準で正規化された状態が元の答えと一致する。
* 平行移動した後（始点の原点はすでに左側のマスにあるので）、左にずらすことはそもそもできない。
* 先に平行移動すると、右にあろうが左にあろうが、$(s_x,s_y)$が$(0,0)$に来てしまい、元の情報（始点が右側のマスにいるのか？それとも左側のマスにいるのか？）を壊してしまう。
* ゴールは`//2`にしても答えが変わらない形にすることで、答えを変えずに都合の良い形にすることだから、
* 答えを変えないように元の情報で維持しなければいけないものは何か？を考えないといけない。


## 解答例

```python
sx,sy=map(int,input().split())
tx,ty=map(int,input().split())
# 右側のマスである=x座標とy座標の偶奇が一致しないとき
tx -= (tx-ty)%2 # 右側のマスにある場合左にずらす
sx -= (sx-sy)%2 # 右側のマスにある場合左にずらす
# 始点分を引いて平行移動した後、右上に正規化(=符号を正に変換→abs)
tx=abs(tx-sx)
ty=abs(ty-sy)
# ty>=txの場合ty, ty<txの場合、ty+(tx-ty)//2
print(ty + max(0, (tx-ty)//2))
```

</details>