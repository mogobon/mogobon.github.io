---
title: "絶対値の話"
author: "mogobon"
date: "最終更新 `r Sys.Date()`"
output:
  bookdown::html_document2:
    css: "style.css"
    mathjax: "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"
    includes:
      in_header: "../mathjax_macros.js"
    code_download: yes
    toc: yes
    toc_depth: 3
    toc_float: yes
    number_sections: no

---

# 記号

* $\land$:「かつ」を表す論理記号である.
* $\lor$:「または」を表す論理記号である.
* $\mathbb{R}$: 実数全体の集合
* $\leq$: $\leqq$と同じである.
* $\geq$: $\geqq$と同じである.


# 絶対値の性質



```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(ggplot2)
```

## 準備




:::{.definition #def-abs name="絶対値"}
<!--$$の直前に文章がないとうまくパーザ出来ずにエラーになる, なのでこのコメント行が必要. 試しにこのコメントを消して, knitしてみよ. (#eq:..の部分がうまく解釈されないはずである)-->

実数$x$に対して, 絶対値$|x|$を次のように定義する.

$$
\begin{equation}
|x| = 
\begin{cases}
x~~~&(x\geq0)\\
-x~~~&(x<0)
\end{cases}
\end{equation}
$$
:::


<!--参照**\@ref(def:abs)**-->
<!--https://bookdown.org/yihui/bookdown/markdown-extensions-by-bookdown.html-->

* 関数$y=|x|$のグラフを描画する.

```{r absplot0,eval=FALSE, echo=FALSE}
base <- ggplot()
base

base <- base + xlim(-5, 5)
base

base <- base + geom_function(fun = abs)
base
```

```{r absplot}
base <- ggplot() + 
  xlim(-5, 5) + 
  geom_function(fun = abs)
base
```


### 絶対値と$\max$関数

:::{.proposition #absmax name="絶対値と$\max$関数"}

任意の実数$x$に対して, 次が成り立つ.

$$
|x|=\max(\{x,-x\})
$$

:::


:::{.proof}

* $x\geq0$の場合
  * $\text{(左辺)}=|x|=x$が成り立つ.
  * $x\geq-x$より, $\text{(右辺)}=\max(\{x,-x\})=x$が成り立つ.
  * よって, $|x|=\max(\{x,-x\})$が成り立つ.
* $x<0$の場合
  * $\text{(左辺)}=|x|=-x$が成り立つ.
  * $-x> x$より, $\text{(右辺)}=\max(\{x,-x\})=-x$が成り立つ.
  * よって, $|x|=\max(\{x,-x\})$が成り立つ.

:::

:::{.note}
**補足**

* 「任意の実数$x$に対して, $x\geq0\Longrightarrow x\geq-x$」が成り立つことは直感的に明らかである. 
* しかし, 次のようにして示すこともできる.
* $x\geq0\Longleftrightarrow 2x\geq 0\Longleftrightarrow x+x\geq0\Longleftrightarrow x\geq -x$
* 「任意の実数$x$に対して, $x<0\Longrightarrow -x<x$」が成り立つことも同様にして示すことができる.
* $x<0\Longleftrightarrow 2x< 0\Longleftrightarrow x+x<0\Longleftrightarrow x< -x$
:::


### 絶対値の非負性


:::{.proposition #absgeq0 name="絶対値の非負性"}



任意の$x\in\mathbb{R}$に対して, 次が成り立つ.

$$
|x|\geq 0
$$
:::


::: {.proof}


* $x\geq 0$のとき, $|x|=x\geq 0$が成り立つ. 
* $x<0$のとき, $|x|=-x=-(x)\geq0$が成り立つ.


:::

:::{.note}
**注意**

* 上で, $x<0$の場合, $|x|\geq 0\Longleftrightarrow |x|>0\lor |x|=0$であり, $|x|=0$は偽であるが, $|x|>0$は真であるから, $|x|\geq 0$が成り立つ. 
* 絶対値の中身が多変数になっている場合は, 複雑に見えるが, 冷静に考えよう.
* 例えば, 以下は誤りである.

**誤り**

$$
\begin{align*}
|x-y|&=
\begin{cases}
x-y~~~&(x\geq0,~y>0)\\
x+y~~~&(x\geq0,~y<0)\\
-x-y~~~&(x<0,~y\geq0)\\
-x+y~~~&(x<0,~y<0)
\end{cases}\\
|x-y|&=
\begin{cases}
< 0~~~(x<y)\\
\geq0~~~(x\geq y)
\end{cases}
\end{align*}
$$


* 場合わけする理由は, **絶対値の中身全体**が正と負の場合とで表現が異なるからである.
* 冷静に, 全体を捉えよう.

:::

:::{.proposition #abssq name="絶対値の2乗と元の数の2乗は同じ"}
任意の$x\in\mathbb{R}$に対して, 次が成り立つ.
$$
|x|^2=x^2
$$
:::

:::{.proof}
* $x\geq0$の場合
  * $|x|=x$より, $|x|^2=(|x|)^2=(x)^2=x^2$が成り立つ.
* $x<0$の場合
  * $|x|=-x$より, $|x|^2=(|x|)^2=(-x)^2=x^2$が成り立つ.

:::

### 絶対値を含む基本的な不等式



:::{.proposition #absrange name="絶対値による評価"}
任意の$x\in\mathbb{R}$に対して, 次が成り立つ.
$$
-|x|\leq x\leq |x|
$$
:::

:::{.proof}
* $|x|\leq x$について
  * $x\geq 0$の場合
    * $|x|=x$であるから, $|x|\leq x$が成り立つ.
  * $x < 0$の場合
    * $|x|=-x>0$であるから, $x<0<|x|$が成り立つ.
    * よって, $x\leq|x|$が成り立つ.
* $-|x|\leq x$について
  * $x\geq 0$の場合
    * $-|x|=-x$であるから, $-|x|=-x\leq0$が成り立つ.
    * よって, $-|x|\leq x$が成り立つ.
  * $x<0$の場合
    * $-|x|=-(-x)$であるから, $-|x|=-(-x)=x$が成り立つ.
    * よって, $-|x|\leq x$が成り立つ.

:::


:::{.proposition #absgeqmi name="絶対値を含む基本的な不等式"}

任意の$x\in\mathbb{R}$に対して, 次が成り立つ.

$$
-x\leq |x|
$$

:::

:::{.proof}

* $x\geq0$の場合
  * $|x|=x$が成り立つので, $|x|+x=x+x=2x\geq0$が成り立つ.
  * よって, $-x\leq|x|$が成り立つ.
* $x<0$の場合
  * $|x|=-x$が成り立つので, $|x|+x=-x+x=0\geq0$が成り立つ.
  * よって, $-x\leq|x|$が成り立つ.
  

:::


:::{.proposition #absieq1 name="絶対値を含む基本的な不等式2"}

任意の$x,M\in\mathbb{R}$に対して, 次が成り立つ.

$$
|x|\leq M \Longleftrightarrow -M\leq x\leq M
$$

:::


:::{.proof}
* $(\Longrightarrow)$
  * $M\geq|x|\geq 0$が成り立つので, $M$が非負の場合を考える.
  * $|x|=\max(\{x,-x\})\leq M$が成り立つ.
  * よって, $x\leq M\land -x\leq M$が成り立つ.
  * $x\leq M\land -x\leq M\Longleftrightarrow x\leq M\land x \geq-M\Longleftrightarrow-M\leq x \leq M$が成り立つ.
  * したがって, $|x|\leq M\Longrightarrow-M\leq x \leq M$が成り立つ.
* $(\Longleftarrow)$
  * $M<0$の場合
    * 「任意の$x,M\in\mathbb{R}$に対して, $x\leq M<0\land x\geq-M>0$である」は偽である. 
    * よって, $|x|\leq M \Longleftarrow-M\leq x \leq M$が成り立つ.
  * $M\geq0$の場合
    * $-M\leq x \leq M\Longleftrightarrow(x+M)(x-M)\leq 0\Longleftrightarrow x^2\leq M^2$が成り立つ. 
    * $|x|^2=x^2$より, $x^2\leq M^2 \Longleftrightarrow |x|\leq M$が成り立つ.
    * よって, $|x|\leq M \Longleftarrow-M\leq x \leq M$が成り立つ.

:::



:::{.proposition #absieq name="絶対値を含む基本的な不等式3"}

任意の$x,m\in\mathbb{R}$に対して, 次が成り立つ.

$$
|x|\geq m \Longleftrightarrow x\leq -m\lor x\geq m
$$

:::


:::{.proof}
* $(\Longrightarrow)$
  * $|x|=\max(\{x,-x\})\geq m$より, $x\geq m\lor -x\geq m$が成り立つ.
  * よって, $|x|\geq m\Longrightarrow x\leq -m\lor x\geq m$が成り立つ.
* $(\Longleftarrow)$
  * $m<0$の場合
    * $x\leq-m\lor x\geq m\Longleftrightarrow x\in\mathbb{R}$が成り立つ.
    * また, $m<0$により, $x\in\mathbb{R}\Longrightarrow |x|\geq m$が成り立つ.
    * よって, $|x|\geq m \Longleftarrow x\leq-m\lor x \geq m$が成り立つ.
  * $m\geq0$の場合
    * $x\leq -m\lor x\geq m\Longleftrightarrow(x+m)(x-m)\geq0\Longleftrightarrow x^2\geq m^2$が成り立つ.
    * $|x|^2=x^2$より, $x^2\geq m\Longleftrightarrow|x|\geq m$が成り立つ.
    * よって, $|x|\geq m \Longleftarrow x\leq-m\lor x \geq m$が成り立つ.
  

:::


## 積の絶対値は絶対値の積



:::{.proposition #prodabs name="積の絶対値は絶対値の積"}


任意の$x,y\in\mathbb{R}$に対して, 次が成り立つ.

$$
\begin{align}
|xy|&=|x||y|\\
\end{align}
$$

:::


:::{.proof}


* 場合わけして示す.

* $x\geq0,~y\geq0$の場合
  * $xy\geq0$が成り立つので, $\text{(左辺)}=|xy|=xy$ が成り立つ.
  * $\text{(右辺)}=|x||y|=xy$が成り立つ.
  * よって, $|xy|=|x||y|$ が成り立つ.

* $x<0,~y\geq0$の場合
  * $xy\leq0$が成り立つので, $\text{(左辺)}=|xy|=-xy$ が成り立つ.
  * $\text{(右辺)}=|x||y|=(-x)\cdot y=-xy$が成り立つ.
  * よって, $|xy|=|x||y|$ が成り立つ.

* $x\geq0,~y<0$の場合
  * $xy\leq0$が成り立つので, $\text{(左辺)}=|xy|=-xy$ が成り立つ.
  * $\text{(右辺)}=|x||y|=x\cdot (-y)=-xy$が成り立つ.
  * よって, $|xy|=|x||y|$ が成り立つ.

* $x<0,~y<0$の場合
  * $xy>0$が成り立つので, $\text{(左辺)}=|xy|=xy$ が成り立つ.
  * $\text{(右辺)}=|x||y|=x\cdot y=xy$が成り立つ.
  * よって, $|xy|=|x||y|$ が成り立つ.

:::






:::{.note}

**注意**

今回は, 右辺に注目すると, 

* $|x|$について, 絶対値の中身全体は, $x$である.
* $|y|$について, 絶対値の中身全体は, $y$である.

よって, $x$と$y$の正負で場合わけしている.

:::

## 商の絶対値は絶対値の商

### 準備



:::{.proposition #invabs name="絶対値の逆数は逆数の絶対値"}


任意の任意の$x\in\mathbb{R}\setminus\{0\}$に対して, 次が成り立つ.

$$
1/|x|=|1/x|
$$

:::

:::{.proof}

* 場合わけにより示す.
* $x>0$の場合
  * $|x|=x$であるから, $\text{(左辺)}=1/|x|=1/x$が成り立つ.
  * $1/x>0$であるから, $\text{(右辺)}=|1/x|=1/x$が成り立つ.
  * よって, $1/|x|=|1/x|$が成り立つ.
* $x<0$の場合
  * $|x|=-x$であるから, $\text{(左辺)}=1/|x|=1/(-x)=-1/x$が成り立つ.
  * $1/x<0$であるから, $\text{(右辺)}=|1/x|=-1/x$が成り立つ.
  * よって, $1/|x|=|1/x|$が成り立つ.

:::




:::{.proposition #divabs name="商の絶対値は絶対値の商"}


任意の$x\in\mathbb{R}$と, 任意の$y\in\mathbb{R}\setminus\{0\}$に対して, 次が成り立つ.

$$
\begin{align}
|x/y|&=|x|/|y|\\
\end{align}
$$

:::


:::{.proof}


* 任意の実数$a$と$0$を除く任意の実数$b$について, $a/b=a\cdot(1/b)$が成り立つ.
* 上で, $a=|x|,~b=|y|$とすることで, $|x|/|y|=|x|\cdot(1/|y|)=|x|\cdot|1/y|$が成り立つ.
* したがって, $|x|/|y|=|x||1/y|=|x\cdot(1/y)|=|x/y|$が成り立つ.

:::


## 和の絶対値は絶対値の和以下(劣加法性)



:::{.proposition #sumabs name="和の絶対値は絶対値の和以下"}

任意の$x,y\in\mathbb{R}$に対して次が成り立つ.

$$
|x+y| \leq |x|+|y| \\
$$
:::



:::{.proof name="場合分けによる証明"}

* $x+y\geq 0$の場合
  * $|x+y|=x+y$が成り立つ.
  * 絶対値による評価\@ref(prp:absrange)より, $x\leq|x|,~y\leq|y|$が成り立つ.
  * よって, $x+y\leq|x|+|y|$が成り立つ.
  * したがって, $|x+y|=x+y\leq|x|+|y|$が成り立つ.
* $x+y< 0$の場合
  * $|x+y|=-x-y$が成り立つ.
  * 絶対値による評価\@ref(prp:absrange)より, $-x\leq|x|,~-y\leq|y|$が成り立つ.
  * よって, $-x-y\leq|x|+|y|$が成り立つ.
  * したがって, $|x+y|=-x-y\leq|x|+|y|$が成り立つ.

:::


:::{.proof name="$-|x|\leq x\leq |x|$を利用する証明"}

* 絶対値による評価(命題\@ref(prp:absrange))より, $-|x|\leq x\leq |x|,~-|y|\leq y\leq |y|$が成り立つ.
* 辺々を足し合わせて$-(|x|+|y|)\leq x+y\leq|x|+|y|$を得る.
* 上の式が成り立つので, $|x+y|\leq|x|+|y|$が成り立つ.

:::

:::{.proof name="平方の差を考える方法による証明"}
* $|x+y|\geq0, |x|+|y|\geq0$より, $|x+y|^2\leq(|x|+|y|)^2\Longleftrightarrow |x+y|\leq|x|+|y|$が成り立つ.
* $(|x|+|y|)^2-|x+y|^2$は次のように同値変形できる.

$$
\begin{align*}
(|x|+|y|)^2-|x+y|^2&=|x|^2+|y|^2+2|x||y|-|x+y|^2\\
&=x^2+y^2+2|xy|-(x+y)^2\\
&=2(|xy|-xy)\\
&\geq0
\end{align*}
$$

* よって, $|x+y|^2\leq(|x|+|y|)^2$が成り立つ.
* したがって, $|x+y|\leq|x|+|y|$が成り立つ. 

:::

:::{.note name="$x\leq y\Longrightarrow|x|\leq|y|$か？"}

**注意**

* 一般に, $x\leq y\Longrightarrow|x|\leq|y|$が成り立つとは限らず, 次の証明は誤りである.

**誤り**

* $x\leq |x|,~y\leq|y|$より, $x+y\leq|x|+|y|$が成り立つ. 
* $\text{(左辺)}=|x+y|\leq||x|+|y||$が成り立つ.
* $|x|+|y|\geq 0$が成り立つので, $||x|+|y||=|x|+|y|$が成り立つ.
* よって, $|x+y|\leq |x|+|y|$が成り立つ. 
:::

## 和の絶対値は絶対値の差以上

:::{.proposition #sumabs name="和の絶対値は絶対値の差以上"}

任意の$x,y\in\mathbb{R}$に対して次が成り立つ.

$$
|x|-|y| \leq |x+y| \\
$$
:::



:::{.proof}

* $X=x+y,~Y=-y$とすると, $x=X+Y,y=-Y$である.
* また, $|-Y|=|Y|$であるから次が成り立つ.
* $|x+y| \leq |x|+|y|\Longleftrightarrow|X|\leq|X+Y|+|-Y|\Longleftrightarrow|X|-|Y|\leq|X+Y|$

:::

:::{.note}
* $|x+y|\leq|x|+|y|$と, $|x|-|y|\leq|x+y|$を合わせて, $|x|-|y|\leq|x+y|\leq|x|+|y|$が言える.
:::
